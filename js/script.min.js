"use strict";function scrollFade(a,b,c){var d=document.querySelectorAll(a),e=0;if(winScroll>winHeight-50)for(e=0;e<d.length;e++)d[e].style.backgroundColor=b;else for(e=0;e<d.length;e++)d[e].style.backgroundColor=c}function changeSection(a,b){for(var c=!0,d=0;d<a.length;d++){var e=document.querySelector("a[href='"+a[d]+"']");removeClass(e,"menu__link--hover")}for(var d=0;d<a.length&&c;d++){var f=document.querySelector(a[d]);if(b>=f.offsetTop-101){var e=document.querySelector("a[href='"+a[d]+"']");addClass(e,"menu__link--hover"),a.splice(d,1),c=!1}}}function changeNav(){winScroll=window.pageYOffset||document.documentElement.scrollTop,winWidth=document.documentElement.clientWidth,scrollFade(".menu","rgba(0,0,0,1)","rgba(0,0,0,0.5)"),scrollFade(".telephone","rgba(0,0,0,1)","rgba(0,0,0,0.5)"),winWidth<=735?scrollFade(".menu__element","rgba(0,0,0,1)","rgba(0,0,0,0.5)"):scrollFade(".menu__element","transparent","transparent"),changeSection(["#contact","#services","#about"],winScroll)}function closeNotificationPoopup(){removeClass(document.querySelector(".notification-popup"),"notification-popup--open")}function openCloseCalculator(){hasClass(document.querySelector(".app-menu"),"app-menu--open")?(removeClass(document.querySelector(".app-menu"),"app-menu--open"),removeClass(document.querySelector(".blind"),"blind--open"),removeClass(document.querySelector(".blind__line1"),"blind__line1--open"),removeClass(document.querySelector(".blind__line2"),"blind__line2--open")):(addClass(document.querySelector(".app-menu"),"app-menu--open"),addClass(document.querySelector(".blind"),"blind--open"),addClass(document.querySelector(".blind__line1"),"blind__line1--open"),addClass(document.querySelector(".blind__line2"),"blind__line2--open"))}function addClass(a,b){for(var c=b.split(" "),d=0;d<c.length;d++)a.className+=" "+c[d];return a.className=a.className.trim(),a.className}function removeClass(a,b){var c=a.className.trim().split(" "),d=b.trim().split(" ");a.className="";a:for(var e=0;e<c.length;e++){for(var f=0;f<d.length;f++)if(c[e]===d[f])continue a;a.className+=" "+c[e]}return a.className=a.className.trim(),a.className}function toggleClass(a,b){var c=b.trim().split(" "),d=c.every(function(b,c,d){return hasClass(a,b)});return d?removeClass(a,b):addClass(a,b),d}function hasClass(a,b){var c=" "+a.className.trim()+" ";return b=b.trim(),!!~c.indexOf(" "+b+" ")}var winHeight=document.documentElement.clientHeight,winWidth=document.documentElement.clientWidth,winScroll=window.pageYOffset||document.documentElement.scrollTop,XHR="onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest,HOURS_COST=350,KILOMETERS_COST=12;document.addEventListener("DOMContentLoaded",function(){var a=document.querySelector(".header"),b=document.querySelector(".app-menu"),c=document.querySelector(".menu"),d=document.querySelectorAll(".hamburger__line"),e=document.querySelector("#btn-cost"),f=document.querySelector("#order_sub"),g=document.querySelector(".notification-popup"),h=document.querySelector(".blind"),i=document.querySelector(".calculator"),j=document.querySelectorAll(".menu__link"),k=document.querySelector(".window__button--close"),l=document.querySelector(".window"),m=document.querySelector(".window__text"),n=document.querySelector(".hamburger"),o=document.querySelector(".ajax-alert-popup"),p=document.querySelectorAll("a[href*='#']");a.style.height=winHeight+"px",b.style.height="100%",window.addEventListener("scroll",changeNav),window.addEventListener("resize",changeNav),g.addEventListener("mouseleave",closeNotificationPoopup),h.addEventListener("mouseleave",closeNotificationPoopup),i.addEventListener("mouseleave",closeNotificationPoopup),e.addEventListener("click",function(){var a=document.querySelector("#city").value,b=document.querySelector("#track").value,c=HOURS_COST*a+KILOMETERS_COST*b;isNaN(c)||0==c?document.querySelector(".calculator__cost").innerHTML="Необходимо вводить только цифры":c<700?document.querySelector(".calculator__cost").innerHTML="Цена: "+2*HOURS_COST+" руб.":document.querySelector(".calculator__cost").innerHTML="Цена: "+c+" руб."});setTimeout(function(){addClass(g,"notification-popup--open")},3e3);h.addEventListener("click",openCloseCalculator),g.addEventListener("click",openCloseCalculator);for(var q=0;q<j.length;q++)j[q].addEventListener("mouseenter",function(){addClass(this,"menu__link--hover")}),j[q].addEventListener("focus",function(){addClass(this,"menu__link--hover")}),j[q].addEventListener("mouseleave",function(){removeClass(this,"menu__link--hover")}),j[q].addEventListener("blur",function(){removeClass(this,"menu__link--hover")});n.addEventListener("click",function(){toggleClass(c,"menu--open");for(var a=0;a<d.length;a++)toggleClass(d[a],"hamburger__line--open")});for(var q=0;q<p.length;q++)p[q].addEventListener("click",function(a){function b(a){var c,d;null===h&&(h=a),c=a-h,d=g<0?Math.max(f-c/i,f+g):Math.min(f+c/i,f+g),window.scrollTo(0,d),d!=f+g?window.requestAnimationFrame(b):location.hash=e.hash}for(var e=this,f=window.pageYOffset,g=Math.round(document.querySelector(e.hash).getBoundingClientRect().top,0),h=null,i=.75,k=0;k<j.length;k++)removeClass(j[k],"menu__link--active menu__link--hover");if(winWidth<=735){removeClass(c,"menu--open");for(var k=0;k<d.length;k++)removeClass(d[k],"hamburger__line--open")}hasClass(e,"menu__link")&&addClass(e,"menu__link--active"),window.requestAnimationFrame(b),a.preventDefault()});f.addEventListener("click",function(a){var b=document.querySelector("#name").value,c=document.querySelector("#tel").value,d=document.querySelector("#message").value;if(""!=b&&""!=d&&""!=c){a.preventDefault();var e=new XHR,f="name="+encodeURIComponent(b)+"&tel="+encodeURIComponent(c)+"&message="+encodeURIComponent(d);e.open("POST","../include/ajax/order.php",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(f),e.onreadystatechange=function(){4==e.readyState&&(200==e.status?(addClass(o,"ajax-alert-popup--open"),addClass(l,"window--done"),document.querySelector(".window__text--done").style.display="block"):(addClass(o,"ajax-alert-popup--open"),addClass(l,"window--error"),document.querySelector(".window__text--error").style.display="block"))}}}),k.addEventListener("click",function(){removeClass(m,"window__text--done window__text--error")})});